<!DOCTYPE html>
<html>

<head>
  <title>Vue源码剖析</title>
  <script src="../../dist/vue.js"></script>
</head>

<body>
  <div id="demo" @click="getA">
    <sku class="mm" :num="num" :age="age"></sku>
    <div class="a" v-for="item in a">{{item}}</div>
  </div>
  <script>
    // 一个组件一个watcher，data有几个对象，就有几个observers，dep的数量是
    // 组件*2+observers+data的属性

    const app = new Vue({
      el: "#demo",
      // template: '<div>template</div>',
      // template: '#app',
      // render(h){return h('div','render')},
      props: {
        age: {
          type: Number,
          default: 44
        }
      },
      provide() {
        return {
          pa: this.a
        }
      },
      comments: true,
      data: {
        userInfo: {
          name: "seclusion",
          age: 26
        },
        a: [1, 2, 3],
        num: { a: 1 }
      },
      mounted() {
        setTimeout(() => {
          this.a.push(2)
        })
      },
      components: {
        sku: {
          props: {
            num: {
              type: Object,
              default: {}
            },
            age: {
              type: Number,
              default: 44
            }
          },
          inject: ['pa'],
          template: `<div class="nn">这是sku{{pa}}</div>`,
          mounted() {
            // setTimeout(() => {
            //   this.pa++
            // }, 3000)
          }
        }
      },
      methods: {
        getA() {
          console.log("getA")
        }
      }
    });

    const hyphenateRE = /\B([A-Z])/g
    const hyphenate = str => {
      return str.replace(hyphenateRE, '-$1').toLowerCase()
    }
    let userInfo = 'userInfoTnnn'
    let b = hyphenate(userInfo)
    console.log('bbbbbbb', b)
  </script>
</body>

</html>